{% extends 'index.html'%}
{% block content %}
{% load tag %}
{% load static %}
    <script src=" {% static '/js/zingchart.min.js' %}"></script>
    <section id="userinfo">
    <div class = "container">
    <div class = "row">
    <div class = 'col-md-4'>
    {% if status %}
        <img src="{{ userinfo_list.avatar }}" height="230px" width="230px">
        <p>{{ userinfo_list.handle }}</p>
        <ul>
        {% if userinfo_list.firstName%}
            <li><h6>FirstName : {{ userinfo_list.firstName }}</h6></li>
        {%endif%}
        {% if userinfo_list.organization%}
            <li><h6>Organisation : {{ userinfo_list.organization }}</h6></li>
        {%endif%}
        {% if userinfo_list.rating%}
            <li><h6>Rating : {{ userinfo_list.rating }}</h6></li>
        {%endif%}
        {% if userinfo_list.rank%}
            <li><h6>Rank : {{ userinfo_list.rank }}</h6></li>
        {%endif%}
        {% if userinfo_list.maxRating%}
            <li><h6>MaxRating : {{ userinfo_list.maxRating }}</h6></li>
        {%endif%}
        {% if userinfo_list.maxRank%}
            <li><h6>MaxRank : {{ userinfo_list.maxRank }}</h6></li>
        {%endif%} 
        {% if userinfo_list.friendOfCount%}
            <li><h6>Friends : {{ userinfo_list.friendOfCount }}</h6></li>
        {%endif%}
        </ul>
    
    </div>
    <div class = 'col-md-8'>
    <div id ="myChart">
    <script>
        var SubmissionData = {
            type : "pie3d",
            
            plot: {
                tooltip: {
                text: "%t<br>%npv%<br>%v"
                },
               
                 
                //to order pie slices by size and have reference angle start at zero.
 
            },
            title : {
            text : "Submissions"
            },
            series: [
                    {% for tag in tagcount %}
                    {% get_count tagcount tag as lol %}
                    { values: {{lol}}, text : "{{tag}}"} {% if not forloop.last %},{% endif %}
                    {% endfor %}
            ]

        } 

        zingchart.render({
            id: 'myChart',
            data: SubmissionData,
        });
    </script>
    </div>
    
    
    <div id="myChart1">
    <script>
        var LangData = {
            type : "pie3d",
            legend: {

            },
            plot: {
                tooltip: {
                text: "%t<br>%npv%<br>%v"
                },
                
            },
            title : {
            text : "Languages"
            },
            series: [
                    {% for l in langcount %}
                    {% get_count langcount l as lil %}
                    { values: {{lil}}, text : "{{l}}"} {% if not forloop.last %},{% endif %}
                    {% endfor %}
            ]

        }

        zingchart.render({
            id: 'myChart1',
            data: LangData,
        });
        </script>
    </div>

  

    <div id="myChart2">
    <script>
        var Ratinggraph = {
            "type": "line",
            
            "title": {
                "text": "Rating",
                "font-size": "24px",
                "adjust-layout": true
            },
            "plotarea": {
                "margin": "dynamic 45 60 dynamic",
            },
            "legend": {
                "layout": "float",
                "background-color": "none",
                "border-width": 0,
                "shadow": 0,
                "align": "center",
                "adjust-layout": true,
                "toggle-action": "remove",
                "item": {
                "padding": 7,
                "marginRight": 17,
                "cursor": "hand"
                }
            },
            "scale-x": {
                "labels": "{{dtime}}" ,
                "label": { /* Add a scale title with a label object. */
                    "text": "Dates"
                        }
            },

            "scale-y": {
                "line-color": "#f6f7f8",
                "shadow": 0,
                "guide": {
                "line-style": "dashed"
                },
                "label": {
                "text": "Rating",
                },
                "minor-ticks": 0,
                "thousands-separator": ","
            },
            "crosshair-x": {
                "line-color": "#efefef",
                "plot-label": {
                "border-radius": "5px",
                "border-width": "1px",
                "border-color": "#f6f7f8",
                "padding": "10px",
                "font-weight": "bold"
                },
                "scale-label": {
                "font-color": "#000",
                "background-color": "#f6f7f8",
                "border-radius": "5px"
                }
            },
            "tooltip": {
                "visible": false
            },
            "plot": {
                "highlight": true,
                "tooltip-text": "%t views: %v<br>%k",
                "shadow": 0,
                "line-width": "2px",
                "marker": {
                "type": "circle",
                "size": 3
                },
                "highlight-state": {
                "line-width": 3
                },
                "animation": {
                "effect": 1,
                "sequence": 2,
                "speed": 100,
                }
            },
            "series": [{
                "values": {{rating}} ,
                "text": "Rating",
                "line-color": "#007790",
                "legend-item": {
                    "background-color": "#007790",
                    "borderRadius": 5,
                    "font-color": "white"
                },
                "legend-marker": {
                    "visible": false
                },
                "marker": {
                    "background-color": "#007790",
                    "border-width": 1,
                    "shadow": 0,
                    "border-color": "#69dbf1"
                },
                "highlight-marker": {
                    "size": 6,
                    "background-color": "#007790",
                }
                
                },
            ]
            };
            
            zingchart.render({
            id: 'myChart2',
            data: Ratinggraph,
            
            });
    </script>
    </div>
    


    <div id="myChart3">
    <script>
        var VerdictData = {
            type : "pie3d",
            legend: {
    
            },
            plot: {
                tooltip: {
                text: "%t<br>%npv%<br>%v"
                },
                
            },
            title : {
            text : "Verditcts"
            },
            series: [
                    {% for v in verdictcount %}
                    {% get_count  verdictcount v as vil %}
                    { values: {{vil}}, text : "{{v}}"} {% if not forloop.last %},{% endif %}
                    {% endfor %}
            ]
    
        }
    
        zingchart.render({
            id: 'myChart3',
            data: VerdictData,
        });
        </script>
    </div>
    <div id="heatmap">
        <script>
        var myConfig = {
        type: 'calendar',
        options: {
          year: {
            text: '2020',
            visible: true
          },
          startMonth: 1,
          endMonth: 7,
          palette: ['none', '#2196F3'],
          month: {
            item: {
              fontColor: 'gray',
              fontSize: 9
            }
          },
          weekday: {
            values: ['', 'M', '', 'W', '', 'F', ''],
            item: {
              fontColor: 'gray',
              fontSize: 9
            }
          },
          values:[
              {% for date in datecount %}
              {% date_count datecount date as lil %}
              [ '{{ date }}',{{lil}} ]    ,
              {%endfor%}
          ]
        },
        labels: [{ //Lefthand Label (container portion)
            borderColor: 'gray',
            borderWidth: 1,
            x: '8%',
            y: '60%',
            width: '40%',
            height: '30%'
          },
          { //Lefthand Label (top portion)
            text: 'Daily Contribution',
            fontColor: '#212121',
            textAlign: 'center',
            x: '10%',
            y: '65%',
            width: '36%'
          },
          { //Lefthand Label (middle portion)
            text: '%plot-value',
            fontColor: '#2196F3',
            fontFamily: 'Georgia',
            fontSize: 35,
            textAlign: 'center',
            x: '10%',
            y: '68%',
            width: '36%'
          },
          // Note: the bottom portion of the Bottom-Left Label is the fixed tooltip, below.
       
          { //Rightside Label (container portion)
            borderColor: 'gray',
            borderWidth: 1,
            x: '52%',
            y: '60%',
            width: '40%',
            height: '30%',
          },
          { //Rightside Label (top portion)
            text: 'Total accepted Submissions ',
            fontColor: '#212121',
            textAlign: 'center',
            x: '54%',
            y: '65%',
            width: '36%'
          },
          { //Rightside Label (middle portion)
            text: '{{ok_count}}',
            fontColor: '#2196F3',
            fontFamily: 'Georgia',
            fontSize: 35,
            textAlign: 'center',
            x: '54%',
            y: '68%',
            width: '36%'
          },
          { //Rightside Label (bottom portion)
            text: 'Jan 1 - Jun 30',
            fontColor: '#212121',
            padding: 2,
            textAlign: 'center',
            x: '54%',
            y: '80%',
            width: '36%'
          }
        ],
       
        tooltip: { //Lefthand Label (bottom portion)
          text: '%data-day',
          backgroundColor: 'none',
          borderColor: 'none',
          fontColor: '#212121',
          padding: 2,
          //textAlign: 'center',
          align: 'center',
          sticky: true,
          timeout: 30000,
          x: '10%',
          y: '80%',
          width: '36%'
        },
       
        plotarea: {
          marginTop: '15%',
          marginBottom: '55%',
          marginLeft: '8%',
          marginRight: '8%'
        }
      };
      zingchart.MODULESDIR="{% static '/js/zingchart-modules/' %}";
      zingchart.loadModules('calendar', function() {
        zingchart.render({
          id: 'heatmap',
          data: myConfig,
          height: 400,
          width: '100%'
        });
      });
        </script>
    </div>
    
  
  













    
    {% else %}
        <h4>User Not Found</h4>
    {% endif %}
    </div>
    
    </div>
    </div>
    </section>
{% endblock %}